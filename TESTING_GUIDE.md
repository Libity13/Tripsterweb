# üß™ Testing Guide - Journey App

## üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‚úÖ Phase 1: Duplicate Key Error Fix
- [x] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç conflict error ‡∏î‡πâ‡∏ß‡∏¢ Random Offset + Delay
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Drag & Drop ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Route Optimization ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á

### ‚úÖ Phase 2: Day Selection Dialog
- [x] ‡∏™‡∏£‡πâ‡∏≤‡∏á Dialog component
- [x] ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡πÉ‡∏ô recommendations
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å

### ‚úÖ Phase 3: Context-Aware Scheduling
- [x] ‡πÄ‡∏û‡∏¥‡πà‡∏° Smart Day Detection
- [x] Geocoding ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö recommendations
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Smart Suggestion ‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏à‡∏£‡∏¥‡∏á
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏¥‡∏Å‡∏±‡∏î

### ‚úÖ Location Change Detection
- [x] ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á logic detection
- [x] ‡πÄ‡∏û‡∏¥‡πà‡∏° normalization
- [x] Initialize previousLocation
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö multi-destination

---

## üß™ Test Scenarios

### 1. Duplicate Key Error Fix

#### Test Case 1.1: Drag & Drop ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ 2 ‡∏ß‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 5-6 ‡πÅ‡∏´‡πà‡∏á
2. ‡∏•‡∏≤‡∏Å-‡∏ß‡∏≤‡∏á destination ‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÑ‡∏õ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2
3. ‡∏•‡∏≤‡∏Å-‡∏ß‡∏≤‡∏á destination ‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2 ‡πÑ‡∏õ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1
4. ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ 5-10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß

Expected:
‚úÖ ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ error "duplicate key value violates unique constraint"
‚úÖ destinations ‡∏ñ‡∏π‡∏Å reorder ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
```

#### Test Case 1.2: Route Optimization
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ 1 ‡∏ß‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 6-8 ‡πÅ‡∏´‡πà‡∏á
2. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "Optimize Route" 
3. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£ optimize
4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "Optimize Route" ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
5. ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ 3-5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á

Expected:
‚úÖ ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ error "duplicate key value violates unique constraint"
‚úÖ optimization ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ loading state ‡πÅ‡∏Ç‡∏ß‡∏ô
```

---

### 2. Day Selection Dialog

#### Test Case 2.1: ‡∏ó‡∏£‡∏¥‡∏õ‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ 1 ‡∏ß‡∏±‡∏ô
2. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£
3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡∏ö‡∏ô recommendation card

Expected:
‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏°‡∏µ Dialog)
‚úÖ ‡πÅ‡∏™‡∏î‡∏á toast notification "‡πÄ‡∏û‡∏¥‡πà‡∏° [‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà] ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡πâ‡∏ß"
‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
```

#### Test Case 2.2: ‡∏ó‡∏£‡∏¥‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (‡πÑ‡∏°‡πà‡∏°‡∏µ Smart Suggestion)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ 3 ‡∏ß‡∏±‡∏ô
2. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏¥‡∏Å‡∏±‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà)
3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°"

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô Day Selection Dialog
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Badge "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥" (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏¥‡∏Å‡∏±‡∏î)
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥
‚úÖ ‡∏Å‡∏î‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ
```

#### Test Case 2.3: ‡∏ó‡∏£‡∏¥‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (‡∏°‡∏µ Smart Suggestion)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢ 2 ‡∏ß‡∏±‡∏ô
2. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢
3. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÅ‡∏ñ‡∏ß‡∏ß‡∏±‡∏î‡∏£‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡πà‡∏ô (‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á ~15 ‡∏Å‡∏°.)
4. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ñ‡∏ß‡∏ß‡∏±‡∏î‡∏£‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡πà‡∏ô
5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡∏ö‡∏ô recommendation

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô Day Selection Dialog
‚úÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏°‡∏µ Badge "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥" ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô ‚≠ê
‚úÖ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á "‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ [‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà] ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2 (X ‡∏Å‡∏°.)"
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2 ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
```

---

### 3. Context-Aware Scheduling (Smart Suggestion)

#### Test Case 3.1: Smart Suggestion ‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏≤‡∏Å (< 15 km)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï 2 ‡∏ß‡∏±‡∏ô
2. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏´‡∏≤‡∏î‡∏õ‡πà‡∏≤‡∏ï‡∏≠‡∏á
3. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï
4. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ñ‡∏ß‡∏´‡∏≤‡∏î‡∏õ‡πà‡∏≤‡∏ï‡∏≠‡∏á
5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°"

Expected:
‚úÖ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 (‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏≤‡∏î‡∏õ‡πà‡∏≤‡∏ï‡∏≠‡∏á)
‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á < 15 ‡∏Å‡∏°.
‚úÖ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°: "‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ [‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà] ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1"
```

#### Test Case 3.2: Smart Suggestion ‡∏£‡∏∞‡∏¢‡∏∞‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (15-30 km)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 3 ‡∏ß‡∏±‡∏ô
2. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà
3. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏î‡∏≠‡∏¢‡∏™‡∏∏‡πÄ‡∏ó‡∏û
4. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏±‡∏ô‡∏Å‡∏≥‡πÅ‡∏û‡∏á
5. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ß‡∏î‡∏≠‡∏¢‡∏™‡∏∏‡πÄ‡∏ó‡∏û
6. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°"

Expected:
‚úÖ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2
‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 15-30 ‡∏Å‡∏°.
‚úÖ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°: "‡πÉ‡∏Å‡∏•‡πâ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏ï‡πà‡∏´‡πà‡∏≤‡∏á‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£"
```

#### Test Case 3.3: ‡πÑ‡∏Å‡∏•‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (> 30 km)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û 2 ‡∏ß‡∏±‡∏ô
2. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó
3. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ò‡∏ô‡∏ö‡∏∏‡∏£‡∏µ
4. ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏Å‡∏•‡∏°‡∏≤‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ)
5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°"

Expected:
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Smart Suggestion (‡πÑ‡∏Å‡∏•‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
‚úÖ ‡πÅ‡∏™‡∏î‡∏á Dialog ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Badge "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"
```

---

### 4. Location Change Detection

#### Test Case 4.1: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏ö‡∏ö Direct
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 2 ‡∏ß‡∏±‡∏ô"
2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ
3. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢"

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô LocationChangeDialog ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤
‚úÖ ‡πÅ‡∏™‡∏î‡∏á "‡∏à‡∏≤‡∏Å: ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà ‚Üí ‡πÑ‡∏õ: ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"
‚úÖ Default ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà"
‚úÖ ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏î‡∏¥‡∏°" ‡πÅ‡∏•‡∏∞ "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"
```

#### Test Case 4.2: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏ö‡∏ö Implicit
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û"
2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ
3. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÉ‡∏ô‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï"

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô LocationChangeDialog
‚úÖ ‡πÅ‡∏™‡∏î‡∏á "‡∏à‡∏≤‡∏Å: ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø ‚Üí ‡πÑ‡∏õ: ‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï"
```

#### Test Case 4.3: Reload ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ
3. Refresh ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (F5)
4. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô LocationChangeDialog (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô)
‚úÖ previousLocation ‡∏ñ‡∏π‡∏Å initialize ‡∏à‡∏≤‡∏Å destinations
```

#### Test Case 4.4: Normalization - ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
2. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢" (‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î")

Expected:
‚úÖ ‡πÄ‡∏´‡πá‡∏ô LocationChangeDialog
‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö normalize ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
‚úÖ ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏°‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
```

#### Test Case 4.5: Multi-destination (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏î‡∏¥‡∏°)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 3 ‡∏ß‡∏±‡∏ô"
2. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏î‡∏¥‡∏°"

Expected:
‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà
‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
‚úÖ previousLocation = "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà, ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"
```

#### Test Case 4.6: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 3 ‡∏ß‡∏±‡∏ô"
2. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà"

Expected:
‚úÖ ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö reload
‚úÖ ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢
```

#### Test Case 4.7: ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)
```
Steps:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
2. ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢"
3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö"

Expected:
‚úÖ Dialog ‡∏õ‡∏¥‡∏î
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏î‡πÜ
‚úÖ ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà)
‚úÖ ‡πÅ‡∏™‡∏î‡∏á toast "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"
```

---

## üêõ Known Issues & Limitations

### 1. BigQuery Quota
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Supabase Free tier ‡∏°‡∏µ quota ‡∏à‡∏≥‡∏Å‡∏±‡∏î
- **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡∏õ‡∏¥‡∏î auto-test functions ‡πÅ‡∏•‡πâ‡∏ß
- **Status**: ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß

### 2. CORS Issues
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Edge Functions ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á CORS headers
- **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÄ‡∏û‡∏¥‡πà‡∏° `Access-Control-Allow-Methods` ‡πÅ‡∏•‡∏∞ helper function
- **Status**: ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á deploy Edge Functions ‡πÉ‡∏´‡∏°‡πà

### 3. Geocoding Accuracy
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏ö‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà, ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞)
- **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÉ‡∏ä‡πâ alternative names ‡πÅ‡∏•‡∏∞ fallback queries
- **Status**: ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà 100%

---

## üìä Test Checklist

### Pre-deployment
- [ ] ‡∏ó‡∏∏‡∏Å test cases ‡πÉ‡∏ô Phase 1 ‡∏ú‡πà‡∏≤‡∏ô
- [ ] ‡∏ó‡∏∏‡∏Å test cases ‡πÉ‡∏ô Phase 2 ‡∏ú‡πà‡∏≤‡∏ô
- [ ] ‡∏ó‡∏∏‡∏Å test cases ‡πÉ‡∏ô Phase 3 ‡∏ú‡πà‡∏≤‡∏ô
- [ ] Location Change Detection ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ linter errors
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ console errors
- [ ] Deploy Edge Functions ‡πÅ‡∏•‡πâ‡∏ß

### Post-deployment
- [ ] CORS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] Edge Functions ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ
- [ ] Geocoding ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- [ ] Route Optimization ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- [ ] Real-time updates ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

---

## üöÄ Deployment Steps

### 1. Deploy Edge Functions
```bash
cd supabase/functions
npx supabase functions deploy ai-chat
npx supabase functions deploy google-places
npx supabase functions deploy google-directions
```

### 2. Set Environment Variables (Supabase Dashboard)
```
ALLOWED_ORIGINS=http://localhost:8081,http://localhost:5173,http://localhost:3000,*
GOOGLE_MAPS_API_KEY=your_key_here
```

### 3. Test Connection
```javascript
// In browser console (F12)
fetch('https://xgzuyyknptpnwslsslcz.supabase.co/functions/v1/google-places', {
  method: 'OPTIONS'
}).then(r => console.log('CORS:', r.headers.get('access-control-allow-origin')));
```

---

## üìù Notes

- **Dev Mode**: Auto-tests ‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î quota
- **Production**: ‡∏Ñ‡∏ß‡∏£ enable error tracking (Sentry, LogRocket)
- **Performance**: Monitor Edge Function invocations
- **UX**: ‡πÄ‡∏û‡∏¥‡πà‡∏° loading states ‡πÅ‡∏•‡∏∞ error handling ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

---

**Last Updated**: 2024-11-24
**Version**: 1.0.0


