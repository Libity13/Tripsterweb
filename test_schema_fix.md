# üß™ Test Schema Fix

## üîß **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥:**

### **1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Duplicate Discriminator Error:**
- ‚úÖ **‡∏£‡∏ß‡∏° 2 ADD_DESTINATIONS cases** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
- ‚úÖ **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `min(1)` ‡πÄ‡∏õ‡πá‡∏ô `min(0)`** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö empty array
- ‚úÖ **‡πÄ‡∏û‡∏¥‡πà‡∏° RECOMMEND_PLACES action** ‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ

### **2. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Schema Structure:**
- ‚úÖ **ADD_DESTINATIONS** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö empty array ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
- ‚úÖ **REMOVE_DESTINATIONS** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á `destination_names` ‡πÅ‡∏•‡∏∞ `destinations`
- ‚úÖ **RECOMMEND_PLACES** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà

## üß™ **‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

### **Test 1: Schema Validation**
1. ‡πÄ‡∏õ‡∏¥‡∏î Developer Console
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö "Discriminator property action has duplicate value"
3. **Expected:** ‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÉ‡∏ô console

### **Test 2: AI Response Validation**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà: "‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢ 3 ‡∏ß‡∏±‡∏ô"
2. ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: "‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô, ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 3500 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô"
3. ‡∏£‡∏≠‡πÉ‡∏´‡πâ AI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô
4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö:** ‡∏û‡∏¥‡∏°‡∏û‡πå "‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"
5. **Expected:** AI ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ action `RECOMMEND_PLACES` ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ validation error

### **Test 3: Empty Array Handling**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà: "‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 2 ‡∏ß‡∏±‡∏ô"
2. ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: "‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß, ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5000 ‡∏ö‡∏≤‡∏ó"
3. ‡∏£‡∏≠‡πÉ‡∏´‡πâ AI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô
4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö:** ‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà"
5. **Expected:** AI ‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏≤‡∏° "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ validation error

## üìä **Expected Results:**

### **‚úÖ Success Indicators:**
- ‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö duplicate discriminator
- AI response validation ‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- AI ‡πÉ‡∏ä‡πâ action ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≥‡∏Ç‡∏≠
- ‡πÑ‡∏°‡πà‡∏°‡∏µ ZodError ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö array validation

### **‚ùå Failure Indicators:**
- ‡∏¢‡∏±‡∏á‡∏°‡∏µ error ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö duplicate discriminator
- AI response validation ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
- ‡∏°‡∏µ ZodError ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö array validation
- AI ‡πÉ‡∏ä‡πâ action ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

## üîç **Debug Tips:**

### **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Log:**
1. ‡∏î‡∏π error messages ‡πÉ‡∏ô console
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö AI response validation
3. ‡∏î‡∏π `actions` array ‡πÉ‡∏ô AI response
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö schema validation

### **‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö schema structure
2. ‡∏î‡∏π error messages ‡πÉ‡∏ô console
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö AI response format
4. ‡∏î‡∏π validation errors

## üéØ **‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:**

### **Schema:**
- ‡πÄ‡∏û‡∏¥‡πà‡∏° validation rules ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error messages
- ‡πÄ‡∏û‡∏¥‡πà‡∏° fallback cases

### **AI Response:**
- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error handling
- ‡πÄ‡∏û‡∏¥‡πà‡∏° retry logic
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ edge cases

## üí° **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**

### **Scenario 1: ‡∏Ç‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å**
- **User:** "‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"
- **AI Response:** ‡πÉ‡∏ä‡πâ `RECOMMEND_PLACES` ‡∏Å‡∏±‡∏ö `place_types: ["lodging", "restaurant"]`

### **Scenario 2: ‡∏Ç‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà**
- **User:** "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà"
- **AI Response:** ‡πÉ‡∏ä‡πâ `ADD_DESTINATIONS` ‡∏Å‡∏±‡∏ö `destinations: []` (empty array)

### **Scenario 3: ‡∏Ç‡∏≠‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà**
- **User:** "‡∏•‡∏ö ‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏®‡∏£‡∏µ‡∏î‡∏¥‡∏©‡∏ê‡πå"
- **AI Response:** ‡πÉ‡∏ä‡πâ `REMOVE_DESTINATIONS` ‡∏Å‡∏±‡∏ö `destination_names: ["‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏®‡∏£‡∏µ‡∏î‡∏¥‡∏©‡∏ê‡πå"]`
